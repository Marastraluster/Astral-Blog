# ğŸŒ ä½¿ç”¨å“ªå’æ¢é’ˆä¸å®å¡”é¢æ¿å®ç°å®¶ä¸­æœåŠ¡å™¨å…¬ç½‘è®¿é—®ï¼ˆéå†…ç½‘ç©¿é€æ–¹æ¡ˆï¼‰

**ä½œè€…**ï¼šMartin Zeng  
**ç³»ç»Ÿç¯å¢ƒ**ï¼š  
- VPSï¼šDebian ç³»ç»Ÿ  
- åŸŸåï¼š`astraluster.top`  
- å®¶åº­æœåŠ¡å™¨ï¼šå¾…é…ç½®ï¼ˆå°†é€šè¿‡å“ªå’ Agent æ¥å…¥ï¼‰

---

## ğŸ§© ä¸€ã€é¡¹ç›®ç›®æ ‡

é€šè¿‡ **å“ªå’æ¢é’ˆï¼ˆNezha Dashboard + Agentï¼‰** ä¸ **å®å¡”é¢æ¿ï¼ˆBT Panelï¼‰** å®ç°å¦‚ä¸‹æ¶æ„ï¼š

```
https://home.astraluster.top
   â†“
[Nginx (å®å¡”é¢æ¿)] â€”â€”â€”> [å“ªå’æ¢é’ˆ Dashboard (VPS)]
   â†‘
[å“ªå’ Agent (å®¶ä¸­æœåŠ¡å™¨)]
   â†‘
[å®¶åº­å±€åŸŸç½‘æœåŠ¡ï¼Œå¦‚ http://localhost:8080]
```

**å®ç°ç›®æ ‡ï¼š**
- æ— éœ€ä½¿ç”¨å†…ç½‘ç©¿é€ï¼ˆå¦‚ frpã€ngrokï¼‰
- å®¶ä¸­æœåŠ¡å™¨ä¸»åŠ¨è¿æ¥ VPS
- VPS æä¾›ç»Ÿä¸€çš„å…¬ç½‘è®¿é—®å…¥å£ï¼ˆåŸŸå + SSLï¼‰
- æ‰€æœ‰æµé‡å¯æ§ã€å®‰å…¨ä¸”ç¨³å®š

---

## âš™ï¸ äºŒã€VPS ä¸Šå®‰è£…å“ªå’æ¢é’ˆé¢æ¿

### 1ï¸âƒ£ å®‰è£…å“ªå’é¢æ¿ï¼ˆDashboardï¼‰

åœ¨ Debian VPS ä¸Šæ‰§è¡Œï¼š

```bash
curl -L https://raw.githubusercontent.com/naiba/nezha/master/script/install.sh -o nezha.sh
chmod +x nezha.sh
sudo ./nezha.sh
```

é€‰æ‹©ï¼š
```
1) å®‰è£…é¢æ¿ (Dashboard)
```

å®‰è£…å®Œæˆåè¾“å‡ºï¼š
- ç®¡ç†åå°è®¿é—®ç«¯å£ï¼ˆé»˜è®¤ `8008`ï¼‰
- ç™»å½•è´¦æˆ·ä¸å¯†ç 
- é…ç½®æ–‡ä»¶è·¯å¾„ï¼š`/opt/nezha/dashboard/config.yaml`

---

### 2ï¸âƒ£ å¯ç”¨åå‘ä»£ç†åŠŸèƒ½

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
nano /opt/nezha/dashboard/config.yaml
```

ä¿®æ”¹æˆ–æ·»åŠ ï¼š

```yaml
reverse:
  enable: true
  listen_port: 5555
```

ä¿å­˜å¹¶é€€å‡ºï¼Œé‡å¯å“ªå’é¢æ¿ï¼š

```bash
systemctl restart nezha-dashboard
```

---

## ğŸ§± ä¸‰ã€åœ¨ VPS ä¸Šå®‰è£…å®å¡”é¢æ¿

### 1ï¸âƒ£ å®‰è£…å®å¡”é¢æ¿ï¼ˆBT Panelï¼‰

```bash
wget -O install.sh http://download.bt.cn/install/install_panel.sh && bash install.sh
```

å®‰è£…åç³»ç»Ÿä¼šæ˜¾ç¤ºï¼š
- å®å¡”è®¿é—®åœ°å€ï¼ˆå¦‚ `http://<VPS_IP>:8888`ï¼‰
- ç™»å½•è´¦å·å’Œå¯†ç 

ç”¨æµè§ˆå™¨è®¿é—®å¹¶ç™»å½•å®å¡”åå°ã€‚

---

### 2ï¸âƒ£ æ·»åŠ ç½‘ç«™ä¸ SSL è¯ä¹¦

1. æ‰“å¼€ã€Œç½‘ç«™ã€ â†’ ã€Œæ·»åŠ ç«™ç‚¹ã€  
   å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **åŸŸå**ï¼š`home.astraluster.top`
   - **æ ¹ç›®å½•**ï¼š`/www/wwwroot/home.astraluster.top`
   - å‹¾é€‰ã€Œåˆ›å»ºç½‘ç«™ã€

2. æ‰“å¼€ç½‘ç«™è®¾ç½® â†’ ã€ŒSSLã€
   - é€‰æ‹©ã€ŒLet's Encryptã€
   - å‹¾é€‰ã€Œè‡ªåŠ¨ç»­ç­¾ã€
   - åŸŸåå¡«å†™ `home.astraluster.top`
   - ç‚¹å‡»ã€Œç”³è¯·è¯ä¹¦ã€

ç”³è¯·æˆåŠŸåï¼ŒHTTPS è‡ªåŠ¨å¯ç”¨ã€‚

---

### 3ï¸âƒ£ é…ç½®åå‘ä»£ç†ï¼ˆNginxï¼‰

1. æ‰“å¼€å®å¡” â†’ ã€Œç½‘ç«™ã€ â†’ é€‰æ‹© `home.astraluster.top` â†’ ã€Œåå‘ä»£ç†ã€
2. ç‚¹å‡»ã€Œæ·»åŠ åå‘ä»£ç†ã€ï¼š
   - **ä»£ç†åç§°**ï¼š`nezha`
   - **ç›®æ ‡ URL**ï¼š`http://127.0.0.1:8008`
   - å‹¾é€‰ã€Œå¯ç”¨åå‘ä»£ç†ã€
3. ä¿å­˜å¹¶åº”ç”¨ã€‚

æ­¤æ—¶è®¿é—®ï¼š

```
https://home.astraluster.top
```

å³å¯æ‰“å¼€å“ªå’æ¢é’ˆé¢æ¿ã€‚  
ï¼ˆåå°è·¯å¾„ `/admin`ï¼‰

---

## ğŸ  å››ã€åœ¨å®¶ä¸­æœåŠ¡å™¨éƒ¨ç½²å“ªå’ Agent

å½“å®¶åº­æœåŠ¡å™¨å¯ç”¨åï¼Œåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼š

```bash
curl -L https://raw.githubusercontent.com/naiba/nezha/master/script/install.sh -o nezha.sh
chmod +x nezha.sh
sudo ./nezha.sh
```

é€‰æ‹©ï¼š
```
2) å®‰è£…Agent
```

è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
- **æœåŠ¡å™¨åœ°å€**ï¼š`astraluster.top`
- **ç«¯å£**ï¼š`5555`
- **èŠ‚ç‚¹ Token**ï¼šä»å“ªå’é¢æ¿åå°å¤åˆ¶ç”Ÿæˆ

å®‰è£…å®Œæˆåï¼ŒAgent ä¼šè‡ªåŠ¨è¿æ¥åˆ° VPSã€‚
åœ¨å“ªå’é¢æ¿çš„ã€ŒèŠ‚ç‚¹ç®¡ç†ã€ä¸­å¯çœ‹åˆ°è¯¥èŠ‚ç‚¹æ˜¾ç¤ºä¸ºâ€œåœ¨çº¿â€ã€‚

---

## ğŸ”„ äº”ã€é…ç½®åä»£é€šé“ï¼ˆå“ªå’é¢æ¿æ“ä½œï¼‰

1. æ‰“å¼€å“ªå’é¢æ¿åå° â†’ ã€ŒèŠ‚ç‚¹ç®¡ç†ã€
2. æ‰¾åˆ°åˆšä¸Šçº¿çš„å®¶ä¸­æœåŠ¡å™¨èŠ‚ç‚¹
3. ç‚¹å‡»ã€Œåå‘ä»£ç†ã€ â†’ ã€Œæ·»åŠ åä»£ã€
4. æŒ‰ä¸‹è¡¨å¡«å†™ï¼š

| å­—æ®µ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|----------|------|
| åç§° | homeweb | è‡ªå®šä¹‰åç§° |
| ç»‘å®šåŸŸå | `blog.astraluster.top` | ä¸ºå®¶ä¸­æœåŠ¡åˆ›å»ºå­åŸŸå |
| è·¯å¾„ | `/` | æ ¹è·¯å¾„ |
| ç›®æ ‡èŠ‚ç‚¹ | å®¶ä¸­æœåŠ¡å™¨ | é€‰æ‹©å¯¹åº”èŠ‚ç‚¹ |
| æœ¬åœ°æœåŠ¡åœ°å€ | `http://127.0.0.1:8080` | å®¶ä¸­å®é™…æœåŠ¡ç«¯å£ |

5. åœ¨åŸŸåæœåŠ¡å•†ä¸­æ·»åŠ  DNS è®°å½•ï¼š

```
blog.astraluster.top â†’ VPSå…¬ç½‘IP
```

å®Œæˆåè®¿é—®ï¼š
```
https://blog.astraluster.top
```
å³å¯è®¿é—®å®¶ä¸­æœåŠ¡å™¨æä¾›çš„ç½‘é¡µã€‚

---

## ğŸ” å…­ã€å®‰å…¨ä¸ç»´æŠ¤å»ºè®®

| å®‰å…¨é¡¹ | å»ºè®® |
|--------|------|
| å“ªå’é¢æ¿ç«¯å£ | ä»…å…è®¸æœ¬åœ°è®¿é—® (`127.0.0.1`)ï¼Œé€šè¿‡å®å¡”åä»£è®¿é—® |
| VPS é˜²ç«å¢™ | æ”¾è¡Œç«¯å£ï¼š`443`ï¼ˆHTTPSï¼‰ã€`5555`ï¼ˆAgent é€šé“ï¼‰ |
| SSL è¯ä¹¦ | ä½¿ç”¨å®å¡” Let's Encrypt è‡ªåŠ¨ç»­ç­¾ |
| Token ä¿å¯† | ä¸å…¬å¼€èŠ‚ç‚¹å¯†é’¥ |
| ç³»ç»Ÿæ›´æ–° | å®šæœŸæ‰§è¡Œ `apt update && apt upgrade` |
| æ—¥å¿—æ¸…ç† | å®šæœŸæ¸…ç† `/opt/nezha/dashboard/logs/` |

---

## ğŸ§° ä¸ƒã€ç›®å½•ä¸ç«¯å£ç»“æ„æ±‡æ€»

| æœåŠ¡ | è¿è¡Œä½ç½® | ç«¯å£ | è·¯å¾„ |
|------|------------|--------|------|
| å“ªå’é¢æ¿ Dashboard | VPS | 8008 | `/opt/nezha/dashboard/` |
| å“ªå’åä»£é€šé“ | VPS | 5555 | é…ç½®äº `config.yaml` |
| å®å¡” Nginx | VPS | 443 | `/www/wwwroot/home.astraluster.top` |
| å“ªå’ Agent | å®¶ä¸­æœåŠ¡å™¨ | å‡ºç«™è¿æ¥ | `/opt/nezha/agent/` |
| å®¶ä¸­ Web æœåŠ¡ | å®¶ä¸­æœåŠ¡å™¨ | 8080 | æœ¬åœ°ç½‘ç«™æˆ–åº”ç”¨ |

---

## ğŸª„ å…«ã€åç»­æ‹“å±•å»ºè®®

- âœ… ä¸ºä¸åŒæœåŠ¡æ·»åŠ å¤šä¸ªå­åŸŸåï¼š  
  - `nas.astraluster.top` â†’ å®¶ä¸­ NAS  
  - `media.astraluster.top` â†’ å®¶ä¸­å½±è§†æœåŠ¡å™¨  
  - `blog.astraluster.top` â†’ ä¸ªäººç½‘ç«™  

- âœ… ç»“åˆ Docker Compose ç®¡ç†å®¶ä¸­å¤šæœåŠ¡ï¼Œç»Ÿä¸€æ¥å…¥å“ªå’ã€‚
- âœ… ä½¿ç”¨ Cloudflare æˆ– DNSPod æå‡åŸŸåè§£æé€Ÿåº¦ä¸å®‰å…¨æ€§ã€‚

---

## ğŸ“˜ æ€»ç»“

é€šè¿‡ **å“ªå’æ¢é’ˆï¼ˆè‡ªå»ºåå‘ä»£ç†ï¼‰ + å®å¡”é¢æ¿ï¼ˆSSL + Nginx ç®¡ç†ï¼‰**ï¼Œ  
ä½ å¯ä»¥è½»æ¾è®©å®¶ä¸­æœåŠ¡å™¨æ‹¥æœ‰å…¬ç½‘å¯è®¿é—®çš„ç½‘ç«™ï¼Œæ— éœ€è´­ä¹°å›ºå®š IPã€æ— éœ€ç¬¬ä¸‰æ–¹ç©¿é€ã€‚

è¯¥æ–¹æ¡ˆå…·æœ‰ï¼š
- ğŸ§© **è‡ªæ§æ€§é«˜**ï¼ˆå®Œå…¨æŒæ¡é“¾è·¯ä¸æ•°æ®ï¼‰  
- ğŸ§  **éƒ¨ç½²ç®€å•**ï¼ˆå®å¡”é¢æ¿å›¾å½¢åŒ–æ“ä½œï¼‰  
- ğŸ”’ **å®‰å…¨ç¨³å®š**ï¼ˆå‡ºç«™è¿æ¥ + HTTPSï¼‰  
- ğŸŒ **å¯æ‹“å±•æ€§å¼º**ï¼ˆå¤šèŠ‚ç‚¹ã€å¤šæœåŠ¡æ¥å…¥ï¼‰

---

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**
ç­‰ä½ çš„å®¶åº­æœåŠ¡å™¨é…ç½®å®Œæˆåï¼Œå¯ä»¥ï¼š
1. å¯åŠ¨ Agent å¹¶æ³¨å†Œåˆ°é¢æ¿ï¼›
2. é…ç½®åä»£å­åŸŸåï¼›
3. æˆ‘å¯ä»¥å¸®ä½ ç”Ÿæˆè‡ªåŠ¨åŒ–å‘½ä»¤ä¸å¤‡ä»½è„šæœ¬ã€‚

---

> ğŸ“„ ç‰ˆæœ¬å·ï¼šv1.0  
> ğŸ—“ï¸ æ›´æ–°æ—¥æœŸï¼š2025-11-10  
> ğŸ§‘â€ğŸ’» ä½œè€…ï¼šMartin Zeng
